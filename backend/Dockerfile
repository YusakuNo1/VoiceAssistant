FROM python:3.11

WORKDIR /app

ARG AZURE_OPENAI_KEY
ENV AZURE_OPENAI_KEY=${AZURE_OPENAI_KEY}

ARG AZURE_OPENAI_CHAT_ENDPOINT
ENV AZURE_OPENAI_CHAT_ENDPOINT=${AZURE_OPENAI_CHAT_ENDPOINT} 

ARG AZURE_OPENAI_VISION_ENDPOINT
ENV AZURE_OPENAI_VISION_ENDPOINT=${AZURE_OPENAI_VISION_ENDPOINT} 

ARG AZURE_OPENAI_EMBEDDINGS_ENDPOINT
ENV AZURE_OPENAI_EMBEDDINGS_ENDPOINT=${AZURE_OPENAI_EMBEDDINGS_ENDPOINT} 

ARG AZURE_AI_SPEECH_SERVICE_KEY
ENV AZURE_AI_SPEECH_SERVICE_KEY=${AZURE_AI_SPEECH_SERVICE_KEY} 

ARG AZURE_AI_SPEECH_SERVICE_REGION
ENV AZURE_AI_SPEECH_SERVICE_REGION=${AZURE_AI_SPEECH_SERVICE_REGION} 

COPY . . 
RUN rm .env

RUN pip install -r requirements.txt

RUN chmod +x run.sh
CMD ["/bin/bash", "-c", "./run.sh"]
